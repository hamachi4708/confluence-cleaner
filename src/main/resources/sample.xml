<atlassian-plugin key="com.tse.confluence.purgepageversions.plugin.confluence-purge-pageversions-plugin" name="Purge Page Versions for Confluence" plugins-version="2">
<plugin-info>
<description>Simple add-on to purge old page versions by retaining last few, either automatically or on-demand basis.</description>
<version>1.2.1</version>
<vendor name="ILA eSolution" url="https://ilaesolution.atlassian.net/wiki/spaces/ILA/overview/"/>
<param name="atlassian-data-center-compatible">true</param>
<param name="plugin-icon">images/pluginIcon.png</param>
<param name="plugin-logo">images/pluginLogo.png</param>
<param name="post.install.url">/plugins/purgeversions/manage-purge-pageversions.action</param>
</plugin-info>
<resource type="i18n" name="i18n" location="confluence-purge-pageversions-plugin"/>
<web-resource key="confluence-purge-pageversions-plugin-resources" name="Purge Page Versions Web Resources">
<dependency>com.atlassian.auiplugin:ajs</dependency>
<resource type="download" name="confluence-purge-pageversions-plugin.css" location="/css/confluence-purge-pageversions-plugin.css"/>
<resource type="download" name="confluence-purge-pageversions-plugin.js" location="/js/confluence-purge-pageversions-plugin.js"/>
<resource type="download" key="images" name="images/" location="/images"/>
<context>confluence-purge-page-versions-plugin</context>
</web-resource>


<component key="confluence-purge-pageversions-util-manager" name="Purge Page Versions Util Manager" class="com.tse.confluence.purgepageversions.plugin.impl.PurgePageVersionsUtilMgrImpl" public="true">
<interface>com.tse.confluence.purgepageversions.plugin.api.PurgePageVersionsUtilMgr</interface>
</component>
<component key="confluence-purge-pageversions-ao-manager" name="Purge Page Versions AO Manager" class="com.tse.confluence.purgepageversions.plugin.impl.PurgePageVersionsAOMgrImpl" public="true">
<interface>com.tse.confluence.purgepageversions.plugin.api.PurgePageVersionsAOMgr</interface>
</component>
<component-import key="ao" name="Purge Page Versions AO Service" interface="com.atlassian.activeobjects.external.ActiveObjects"/>
<ao key="confluence-purge-pageversions-ao" name="Purge Page Versions AO Entity">
<entity>com.tse.confluence.purgepageversions.plugin.api.PurgeVersionsAO</entity>
</ao>
<rest key="confluence-purge-pageversions-rest-resource" name="confluence-purge-pageversions-rest-resource" i18n-name-key="confluence-purge-pageversions-rest-resource.name" path="/purgepageversions" version="1.0">
</rest>
<component-import name="Purge Page Versions Transaction Template" key="confluence-purge-pageversions-transaction-template">
<interface>com.atlassian.sal.api.transaction.TransactionTemplate</interface>
</component-import>
<component key="confluence-purge-pageversions-job-runner" name="Purge Page Versions Job" class="com.tse.confluence.purgepageversions.plugin.job.PurgePageVersionsJobRunner"/>
<job-config name="Purge Page Versions Job Config" key="confluence-purge-pageversions-job">
<job key="confluence-purge-pageversions-job-runner" perClusterJob="true"/>
<schedule cron-expression="0 0 4 ? * 7" jitterSecs="10"/>
<managed editable="true" keepingHistory="true" canRunAdhoc="true" canDisable="true"/>
</job-config>
<xhtml-macro name="page-version-summary" key="page-version-summary-for-confluence-macro" icon="/download/resources/com.tse.confluence.purgepageversions.plugin.confluence-purge-pageversions-plugin:confluence-purge-pageversions-plugin-resources/images/scmenthusiast.png" class="com.tse.confluence.purgepageversions.plugin.api.PurgePageVersionsMetricMacro">
<device-type>mobile</device-type>
<description key="confluence-purge-pageversions-macro.desc"/>
<category name="external-content"/>
<parameters>
<parameter name="spaceKey" type="string"/>
</parameters>
</xhtml-macro>
<web-section key="purge-pageversions-admin-section" location="system.admin" name="Purge Page Versions Admin Section" weight="200">
<label key="purge-pageversions.section.label"/>
</web-section>
<web-item key="purge-pageversions-admin-link-web-item" name="Purge Page Versions Admin web item" section="system.admin/purge-pageversions-admin-section" weight="10">
<label key="purge-pageversions-admin.link.label"/>
<link id="purge-pageversions-admin-link">/plugins/purgeversions/manage-purge-pageversions.action</link>
</web-item>
<web-item key="confluence-purge-pageversions-menu-user" name="Purge Page Versions web item" section="system.content.action/primary" weight="30">
<label key="confluence-purge-pageversions-secondary.label"/>
<link id="confluence-purge-pageversions-link">/plugins/purgeversions/purge-pageversions.action?pageId=$page.id</link>
<condition class="com.atlassian.confluence.plugin.descriptor.web.conditions.PagePermissionCondition">
<param name="permission">remove</param>
</condition>
</web-item>
<web-item key="confluence-purge-pageversions-menu-space-tools" name="Space Purge Page Versions Web item" section="system.space.tools/addons" weight="100">
<label key="confluence-purge-pageversions-space-tools-link.label"/>
<link id="confluence-purge-pageversions-space-tools-link">/plugins/purgeversions/space-purge-pageversions.action?key=$generalUtil.urlEncode($helper.spaceKey)</link>
<condition class="com.atlassian.confluence.plugin.descriptor.web.conditions.SpacePermissionCondition">
<param name="permission">administer</param>
</condition>
</web-item>
<xwork name="Purge Page Versions Actions" key="confluence-purge-pageversions-list-action">
<package name="confluence-purge-pageversions-package" extends="default" namespace="/plugins/purgeversions">
<default-interceptor-ref name="defaultStack"/>
<action name="manage-purge-pageversions" class="com.tse.confluence.purgepageversions.plugin.api.PurgePageVersionsAdminAction">
<result name="success" type="velocity">/templates/manage-purge-pageversions.vm</result>
</action>
<action name="purge-pageversions" class="com.tse.confluence.purgepageversions.plugin.api.PurgePageVersionsAction">
<result name="success" type="velocity">/templates/purge-pageversions.vm</result>
</action>
<action name="space-purge-pageversions" class="com.tse.confluence.purgepageversions.plugin.api.PurgePageVersionsSpaceAction">
<result name="success" type="velocity">/templates/space-purge-pageversions.vm</result>
</action>
</package>
</xwork>
</atlassian-plugin>